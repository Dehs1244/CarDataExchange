# CarDataExchange
## Решение тестового задания на должность младший инженер-программист <b>C#</b>.
Проект представляет клиент-серверное взаимодействие с использованием сокетов.Сервер хранит информацию о доступных автомобилях у дилера в структурированном формате. Каждый автомобиль представлен маркой, годом выпуска и объемом двигателя. Для передачи данных между клиентом и сервером используется специальный бинарный протокол, позволяющий сериализовать и десериализовать данные автомобилей.
## ***Возможности***
* Создание и запуск сервера, который хранит информацию об автомобилях.
* Асинхронная архитектура клиента.
* Сериализация и десериализация данных в битовой последовательности.
* Сохранение последующих входящих данных в XML формат.
## Алгоритм работы
1. Запуск серверной части (CarDataExchange.Server)
1. Сервер запускается локально, в консоли нужно ввести порт для подключения клиентов
1. Запуск клиента (CarDataExchange.Client)
1. В консоли нужно ввести порт для подключения
1. В клиенте нужно ввести команды для взаимодействия с сервером или написать команду **help**, в которой описаны все доступные команды

| Команда      | Описание     
| -------------|:-------------:
| G_ALL        | Получить все записи 
| G_BY         | Получить конкретную запись

## Алгоритм передачи данных
1. Сервер преобразует структуру в последовательность байтов с помощью интерфейса ```IDecoder<T>```
1. Базовая реализация выполнена с помощью абстрактного класса ```BaseDataFoundation<T>```
1. Структура прогоняется через рефлексию, оттуда берутся существующие данные
## Алгоритм получения данных
1. Получатель десериализует данные через интерфейс ```IEncoder<T>```, базовая реализация выполнена в абстрактном классе ```BaseDataFoundation<T>```
1. В методе идёт разбиение последовательности по байтовым фрагментам
1. Первый байт в фрагменте означает тип данных
1. Далее выполняется десериализация и готовые данные помещаются в контейнер
1. Методы реализации структуры вытаскивает из контейнера готовые данные по токенам. Если такого токена нет, то поле является пустым.
1. Поля в методе заполняются последовательно вместе с последовательностью байтов
## В проекте выполнены
1. Процесс сериализации и десериализации данных
1. Процесс передачи данных
1. Предусмотрены пустые поля в последовательности байтов
## Сериализация поддерживает следующие типы данных:
| Тип данных   | Значение     
| -------------|:-------------:
| System.String| 0x09 
| System.UInt16| 0x12
| System.Single| 0x13
## Проект
- **CarDataExchange.Client**
  - Асинхронные потоки для получения, вывода, обработки и отправки информации.
  - Подключение к серверу по указанному порту.
  - Сохранение полученных данных в **XML** формат.\
  Формат получения данных:
```xml
  <?xml version="1.0" encoding="utf-8"?>
  <Car xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Brand>Nissan</Brand>
    <Year>2008</Year>
    <EngineSize>1.6</EngineSize>
    <Doors xsi:nil="true" />
  </Car>
```
- **CarDataExchange.Core**
  - Определение основных типов для взаимодействия клиента и сервера.
  - Реализация кодирования и декодирования информации.
  - Реализация классов для логирования информации.
- **CarDataExchange.Server**
  - Реализация сервера для обработки входящих сообщений.
  - Асинхронная обработка сообщений от клиентов.
  - Возможность подключения нескольких клиентов.
- **CarDataExchange.Tests**
  - Тестирование основных модулей сериализации и десериализации битовой последовательности.